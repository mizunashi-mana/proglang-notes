\section{Strik Type System}

\subsection{Declarative}

Environment:

\begin{align*}
  \begin{array}{rclr}
    \Gamma
    & \Coloneq & \epsilon &(\text{empty}) \\
    & \mid & x: \mathit{type} &(\text{variable}) \\
    & \mid & x = \mathit{type} &(\text{synonym}) \\
    & \mid & \Gamma_1; \Gamma_2 &(\text{concatenation})
  \end{array}
\end{align*}

Program:

$\fbox{$\Gamma \vdash \mathit{program} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathbf{program}(\mathit{decl}_1; \cdots; \mathit{decl}_n) \mid \Delta_n}{
    \begin{array}{c}
      \mathit{decl}_1 \mid x_{1,1}, \ldots, x_{1,m_1}
      \hspace{1em}
      \cdots
      \hspace{1em}
      \mathit{decl}_n \mid x_{n,1}, \ldots, x_{n,m_n}
      \\
      \mathbf{fresh}(a_{1,1}, \ldots, a_{1, m_1}, \ldots, a_{n,1}, \ldots, a_{n, m_n})
      \hspace{1em}
      \Gamma_1 = \Gamma; x_{1,1}: a_{1,1}; \cdots; x_{1,m_1}: a_{1, m_1}; \cdots x_{n,1}: a_{n,1}; \cdots; x_{n,m_n}: a_{n,m_n}
      \\
      \Delta_0 = \Gamma_1
      \hspace{1em}
      \Delta_0 \vdash \mathit{decl}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{decl}_n \mid \Delta_n
    \end{array}
  }
\end{gather*}

Declaration:

$\fbox{$\mathit{decl} \mid x_1, \ldots, x_n$}$

\begin{gather*}
  \infer{\mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid f}{}
\end{gather*}

$\fbox{$\Gamma \vdash \mathit{decl} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma_1; f: a; \Gamma_2 \vdash \mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid \Delta}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{argItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{argItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{expr}: \mathit{type}
      \hspace{1em}
      \Delta = \Gamma_1; f: a; \Gamma_2; a = (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
    \end{array}
  }
\end{gather*}

Expression:

$\fbox{$\Gamma \vdash \mathit{expr}: \mathit{type}$}$

\begin{gather*}
  \infer{\Gamma \vdash x: \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash n: \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n): (\mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{tupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{tupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{blockItem}_1; \cdots; \mathit{blockItem}_n): \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{blockItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{blockItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \lambda(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}): (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{argItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{argItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
    &
    \Delta_n \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}(\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n): \mathit{type}}{
    \begin{array}{c}
      \Gamma \vdash \mathit{expr}: (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
      \\
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{tupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{tupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}(\mathit{expr}_{1,1} \rightarrow \mathit{expr}_{1,2}; \cdots; \mathit{expr}_{n,1} \rightarrow \mathit{expr}_{n,2}): \mathit{type}}{
    \Gamma \vdash \mathit{expr}_{1, 1}: \mathbf{Bool}
    &
    \Gamma \vdash \mathit{expr}_{1, 2}: \mathit{type}
    &
    \cdots
    &
    \Gamma \vdash \mathit{expr}_{n, 1}: \mathbf{Bool}
    &
    \Gamma \vdash \mathit{expr}_{n, 2}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{expr}: \mathit{type}): \mathit{type}}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}: \mathit{type}_2}{
    \Gamma \vdash \mathit{expr}: \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \succeq \mathit{type}_2
  }
\end{gather*}

Tuple:

$\fbox{$\Gamma \vdash \mathit{tupleItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash x = \mathit{expr}: (x: \mathit{type}) \mid \Gamma}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x) = \mathit{type}: (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Block:

$\fbox{$\Gamma \vdash \mathit{blockItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{expr}: \mathit{type} \mid \Gamma}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{expr}): () \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{rec}(x = \mathit{expr}): () \mid \Gamma; x: \mathit{type}}{
    \Gamma; x: \mathit{type} \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash \mathbf{letType}(f)(\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)(\mathit{type}): () \\
      \hspace{1em}\mid \Gamma; f: (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}_0; f(\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) = \mathit{type}
    \end{array}
  }{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleSigItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n: \mathit{type}_n \mid \Delta_n
    &
    \Delta_n \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Argument:

$\fbox{$\Gamma \vdash \mathit{argItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}): (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash x: (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}): (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x): (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type:

$\fbox{$\Gamma \vdash \mathit{type}: \mathit{type}_0$}$

\begin{gather*}
  \infer{\Gamma \vdash x: \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash n: \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n): \mathbf{Type}}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleSigItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n): (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}: \mathbf{Type}}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleSigItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n: \mathit{type}_n \mid \Delta_n
    &
    \Delta_n \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n): \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeBlockItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeBlockItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathit{type}(\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n): \mathit{type}_0}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}: (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}_0
      \\
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{typeTupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
    \end{array}
  }
  \\
  \infer{\Gamma \vdash (\mathit{type}: \mathit{type}_0): \mathit{type}_0}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathit{type}: \mathit{type}_2}{
    \Gamma \vdash \mathit{type}: \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \succeq \mathit{type}_2
  }
\end{gather*}

Tuple Type:

$\fbox{$\Gamma \vdash \mathit{typeTupleSigItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}): \mathbf{Type} \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}): \mathit{type}_0 \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type Tuple:

$\fbox{$\Gamma \vdash \mathit{typeTupleItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x = \mathit{type}): (x: \mathit{type}_0) \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x) = \mathit{type}): (\mathbf{prom}(x) = \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type Block:

$\fbox{$\Gamma \vdash \mathit{typeBlockItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{type}: \mathit{type}_0 \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{type}): () \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Cast:

\begin{gather*}
  \infer{\Gamma \vdash \mathit{type}_1 \succeq \mathit{type}_2}{
    \mathit{type}_1 = \mathit{type}_2
  }
  \\
  \infer{\Gamma_1; x = \mathit{type}; \Gamma_2 \vdash \mathit{type}_1 \preceq \mathit{type}_2}{
    \Gamma_1; x = \mathit{type}; \Gamma_2 \vdash \mathit{type}_1[x \assign \mathit{type}] \succeq \mathit{type}_2[x \assign \mathit{type}]
  }
\end{gather*}

\subsection{Bidirectional}

TODO

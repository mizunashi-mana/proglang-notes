\section{Strik Type System}

\subsection{Declarative}

Context:

\begin{align*}
  \begin{array}{rclr}
    \Gamma
    & \Coloneq & \epsilon &(\text{empty}) \\
    & \mid & x: \mathit{type} &(\text{variable}) \\
    & \mid & x = \mathit{type} &(\text{synonym}) \\
    & \mid & \Gamma_1; \Gamma_2 &(\text{concatenation})
  \end{array}
\end{align*}

Program:

$\fbox{$\Gamma \vdash \mathit{program} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathbf{program}(\mathit{decl}_1; \cdots; \mathit{decl}_n) \mid \Delta_n}{
    \begin{array}{c}
      \mathit{decl}_1 \mid x_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \mathit{decl}_n \mid x_n
      \\
      \mathbf{fresh}(a_1, \ldots, a_n)
      \hspace{1em}
      \Gamma_1 = \Gamma; x_1: a_1; \cdots; x_n: a_n
      \\
      \Delta_0 = \Gamma_1
      \hspace{1em}
      \Delta_0 \vdash \mathit{decl}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{decl}_n \mid \Delta_n
    \end{array}
  }
\end{gather*}

Declaration:

$\fbox{$\mathit{decl} \mid x$}$

\begin{gather*}
  \infer{\mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid f}{}
\end{gather*}

$\fbox{$\Gamma \vdash \mathit{decl} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma_1; f: a; \Gamma_2 \vdash \mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid \Delta}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{argItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{argItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{expr}: \mathit{type}
      \hspace{1em}
      \Delta = \Gamma_1; f: a; \Gamma_2; a = (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
    \end{array}
  }
\end{gather*}

Expression:

$\fbox{$\Gamma \vdash \mathit{expr}: \mathit{type}$}$

\begin{gather*}
  \infer{\Gamma \vdash x: \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash n: \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n): (\mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{tupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{tupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{blockItem}_1; \cdots; \mathit{blockItem}_n): \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \mathit{type}_0 = ()
    &
    \Delta_0 \vdash \mathit{blockItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{blockItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \lambda(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}): (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \\
      \Delta_0 \vdash \mathit{argItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{argItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{expr}: \mathit{type}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}(\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n): \mathit{type}}{
    \begin{array}{c}
      \Gamma \vdash \mathit{expr}: (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
      \\
      \Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n): (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}(\mathit{expr}_{1,1} \rightarrow \mathit{expr}_{1,2}; \cdots; \mathit{expr}_{n,1} \rightarrow \mathit{expr}_{n,2}): \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
    &
    \Gamma \vdash \mathit{expr}_{1, 1}: \mathbf{Bool}
    &
    \Gamma \vdash \mathit{expr}_{1, 2}: \mathit{type}
    &
    \cdots
    &
    \Gamma \vdash \mathit{expr}_{n, 1}: \mathbf{Bool}
    &
    \Gamma \vdash \mathit{expr}_{n, 2}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{expr}: \mathit{type}): \mathit{type}}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}: \mathit{type}_2}{
    \Gamma \vdash \mathit{expr}: \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2
  }
\end{gather*}

Tuple:

$\fbox{$\Gamma \vdash \mathit{tupleItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash x = \mathit{expr}: (x: \mathit{type}) \mid \Gamma}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x) = \mathit{type}: (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Block:

$\fbox{$\Gamma \vdash \mathit{blockItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{expr}: \mathit{type} \mid \Gamma}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{expr}): () \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{expr}: \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{rec}(x = \mathit{expr}): () \mid \Gamma; x: \mathit{type}}{
    \Gamma; x: \mathit{type} \vdash \mathit{expr}: \mathit{type}
  }
\end{gather*}

Argument:

$\fbox{$\Gamma \vdash \mathit{argItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}): (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash x: (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}): (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x): (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type:

$\fbox{$\Gamma \vdash \mathit{type}: \mathit{type}_0$}$

\begin{gather*}
  \infer{\Gamma \vdash x: \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{Type}: \mathbf{Type}}{}
  \\
  \infer{\Gamma \vdash n: \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n): \mathbf{Type}}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleSigItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n): (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}: \mathbf{Type}}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \\
      \Delta_0 \vdash \mathit{typeTupleSigItem}_1: \mathit{type}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n: \mathit{type}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{type}: \mathbf{Type}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n): \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeBlockItem}_1: \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeBlockItem}_n: \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathit{type}(\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n): \mathit{type}_0}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}: (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}_0
      \\
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{typeTupleItem}_1: \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n: \mathit{typeTupleSigItem}_n \mid \Delta_n
    \end{array}
  }
  \\
  \infer{\Gamma \vdash (\mathit{type}: \mathit{type}_0): \mathit{type}_0}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathit{type}: \mathit{type}_2}{
    \Gamma \vdash \mathit{type}: \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2
  }
\end{gather*}

Tuple Type:

$\fbox{$\Gamma \vdash \mathit{typeTupleSigItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}): \mathbf{Type} \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}): \mathit{type}_0 \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type Tuple:

$\fbox{$\Gamma \vdash \mathit{typeTupleItem}: \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x = \mathit{type}): (x: \mathit{type}_0) \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x) = \mathit{type}): (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Type Block:

$\fbox{$\Gamma \vdash \mathit{typeBlockItem}: \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{type}: \mathit{type}_0 \mid \Gamma}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{type}): () \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type}: \mathit{type}_0
  }
\end{gather*}

Cast:

$\fbox{$\Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2}{
    \mathit{type}_1 = \mathit{type}_2
  }
  \\
  \infer{\Gamma_1; x = \mathit{type}; \Gamma_2 \vdash \mathit{type}_1 \preceq \mathit{type}_2}{
    \Gamma_1; x = \mathit{type}; \Gamma_2 \vdash \mathit{type}_1[x \assign \mathit{type}] \preceq \mathit{type}_2[x \assign \mathit{type}]
  }
\end{gather*}

\subsection{Bidirectional}

Program:

$\fbox{$\Gamma \vdash \mathit{program} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathbf{program}(\mathit{decl}_1; \cdots; \mathit{decl}_n) \mid \Delta_n}{
    \begin{array}{c}
      \mathit{decl}_1 \mid x_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \mathit{decl}_n \mid x_n
      \\
      \mathbf{fresh}(a_1, \ldots, a_n)
      \hspace{1em}
      \Gamma_1 = \Gamma; x_1: a_1; \cdots; x_n: a_n
      \\
      \Delta_0 = \Gamma_1
      \hspace{1em}
      \Delta_0 \vdash \mathit{decl}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{decl}_n \mid \Delta_n
    \end{array}
  }
\end{gather*}

Declaration:

$\fbox{$\mathit{decl} \mid x$}$

\begin{gather*}
  \infer{\mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid f}{}
\end{gather*}

$\fbox{$\Gamma \vdash \mathit{decl} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma_1; f: a; \Gamma_2 \vdash \mathbf{fun}(f)(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \mid \Delta}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{argItem}_1 \Rightarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{argItem}_n \Rightarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{expr} \Leftarrow \mathit{type}
      \hspace{1em}
      \Delta = \Gamma_1; f: a; \Gamma_2; a = (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
    \end{array}
  }
\end{gather*}

Expression:

$\fbox{$\Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}$}$
$\fbox{$\Gamma \vdash \mathit{expr} \Leftarrow \mathit{type}$}$

\begin{gather*}
  \infer{\Gamma \vdash x \Rightarrow \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash n \Rightarrow \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{expr}: \mathit{type}) \Rightarrow \mathit{type}}{
    \Gamma \vdash \mathit{expr} \Leftarrow \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr} \Leftarrow \mathit{type}_2}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2
  }
  \\
  \infer{\Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow (\mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{tupleItem}_1 \Rightarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{tupleItem}_n \Rightarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{blockItem}_1; \cdots; \mathit{blockItem}_n) \Rightarrow \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \mathit{type}_0 = ()
    &
    \Delta_0 \vdash \mathit{blockItem}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{blockItem}_n \Rightarrow \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \lambda(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \\
      \Delta_0 \vdash \mathit{argItem}_1 \Rightarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{argItem}_n \Rightarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{expr} \Leftarrow \mathit{type}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}(\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow \mathit{type}}{
    \begin{array}{c}
      \Gamma \vdash \mathit{expr} \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}
      \\
      \Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Leftarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}(\mathit{expr}_{1,1} \rightarrow \mathit{expr}_{1,2}; \cdots; \mathit{expr}_{n,1} \rightarrow \mathit{expr}_{n,2}) \Rightarrow \mathit{type}}{
    \begin{array}{c}
      n > 0
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{1, 1} \Leftarrow \mathbf{Bool}
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{1, 2} \Rightarrow \mathit{type}
      \\
      \Gamma \vdash \mathit{expr}_{2, 1} \Leftarrow \mathbf{Bool}
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{2, 2} \Leftarrow \mathit{type}
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{n, 1} \Leftarrow \mathbf{Bool}
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{n, 2} \Leftarrow \mathit{type}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}() \Rightarrow \mathit{type}}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type}
  }
\end{gather*}

Tuple:

$\fbox{$\Gamma \vdash \mathit{tupleItem} \Rightarrow \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash x = \mathit{expr} \Rightarrow (x: \mathit{type}) \mid \Gamma}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x) = \mathit{type} \Rightarrow (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
\end{gather*}

Block:

$\fbox{$\Gamma \vdash \mathit{blockItem} \Rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{expr} \Rightarrow \mathit{type} \mid \Gamma}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{expr}) \Rightarrow () \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}
  }
  \\
  \infer{\Gamma \vdash \mathbf{rec}(x = \mathit{expr}) \Rightarrow () \mid \Gamma; x: \mathit{type}}{
    \Gamma; x: \mathit{type} \vdash \mathit{expr} \Rightarrow \mathit{type}
  }
\end{gather*}

Argument:

$\fbox{$\Gamma \vdash \mathit{argItem} \Rightarrow \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}) \Rightarrow (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash x \Rightarrow (x: \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}) \Rightarrow (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{prom}(x) \Rightarrow (\mathbf{prom}(x): \mathit{type}) \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
\end{gather*}

Type:

$\fbox{$\Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0$}$
$\fbox{$\Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0$}$

\begin{gather*}
  \infer{\Gamma \vdash x \Rightarrow \mathit{type}}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{Type} \Rightarrow \mathbf{Type}}{}
  \\
  \infer{\Gamma \vdash n \Rightarrow \mathbf{Int}}{
    \Gamma \vdash \mathbf{Int} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \Rightarrow \mathbf{Type}}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleSigItem}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n \Rightarrow \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n) \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleItem}_1 \Rightarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n \Rightarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \Rightarrow \mathbf{Type}}{
    \begin{array}{c}
      \Delta_0 = \Gamma
      \\
      \Delta_0 \vdash \mathit{typeTupleSigItem}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleSigItem}_n \Rightarrow \mathit{type}_n \mid \Delta_n
      \\
      \Delta_n \vdash \mathit{type} \Leftarrow \mathbf{Type}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n) \Rightarrow \mathit{type}_n}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeBlockItem}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeBlockItem}_n \Rightarrow \mathit{type}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash \mathit{type}(\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n) \Rightarrow \mathit{type}_0}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type} \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}_0
      \\
      \Delta_0 = \Gamma
      \hspace{1em}
      \Delta_0 \vdash \mathit{typeTupleItem}_1 \Leftarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n \Leftarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
    \end{array}
  }
  \\
  \infer{\Gamma \vdash (\mathit{type}: \mathit{type}_0) \Rightarrow \mathit{type}_0}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_2}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_1
    &
    \Gamma \vdash \mathit{type}_1 \preceq \mathit{type}_2
  }
\end{gather*}

Tuple Type:

$\fbox{$\Gamma \vdash \mathit{typeTupleSigItem} \Rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x: \mathit{type}) \Rightarrow \mathbf{Type} \mid \Gamma}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type}
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x): \mathit{type}) \Rightarrow \mathit{type}_0 \mid \Gamma; x: \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
\end{gather*}

Type Tuple:

$\fbox{$\Gamma \vdash \mathit{typeTupleItem} \Rightarrow \mathit{typeTupleSigItem} \mid \Delta$}$
$\fbox{$\Gamma \vdash \mathit{typeTupleItem} \Leftarrow \mathit{typeTupleSigItem} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (x = \mathit{type}) \Rightarrow (x: \mathit{type}_0) \mid \Gamma}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash (x = \mathit{type}) \Leftarrow (x: \mathit{type}_0) \mid \Gamma}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x) = \mathit{type}) \Rightarrow (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash (\mathbf{prom}(x) = \mathit{type}) \Rightarrow (\mathbf{prom}(x): \mathit{type}_0) \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0
  }
\end{gather*}

Type Block:

$\fbox{$\Gamma \vdash \mathit{typeBlockItem} \Rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0 \mid \Gamma}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
  \\
  \infer{\Gamma \vdash \mathbf{let}(x = \mathit{type}) \Rightarrow () \mid \Gamma; x: \mathit{type}_0; x = \mathit{type}}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0
  }
\end{gather*}

\subsection{Algorithmic Bidirectional}

Context:

\begin{align*}
  \begin{array}{rclr}
    \Gamma
    & \Coloneq & \epsilon &(\text{empty}) \\
    & \mid & x: \mathit{type} &(\text{variable}) \\
    & \mid & x = \mathit{type} &(\text{synonym}) \\
    & \mid & \hat{x}: \mathit{type} &(\text{generated variable}) \\
    & \mid & \hat{x} = \mathit{type} &(\text{equation}) \\
    & \mid & \Gamma_1; \Gamma_2 &(\text{concatenation})
  \end{array}
\end{align*}

Program:

TODO

Declaration:

TODO

Expression:

$\fbox{$\Gamma \vdash \mathit{expr} \Rightarrow \mathit{type} \mid \Delta$}$
$\fbox{$\Gamma \vdash \mathit{expr} \Leftarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash x \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type} \Leftarrow \mathbf{Type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\mathit{expr}: \mathit{type}) \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{expr} \Leftarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathit{expr} \Leftarrow \mathit{type}_2 \mid \Delta}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \Delta_1 \vdash \mathit{type}_1 \preceq \mathit{type}_2 \mid \Delta
  }
  \\
  \infer{\Gamma \vdash n \Rightarrow \mathbf{Int} \mid \Delta}{
    \Gamma \vdash \mathbf{Int} \Leftarrow \mathbf{Type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow (\mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta}{
    \Gamma \vdash (\circ; \mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ; \mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{blockItem}_1; \cdots; \mathit{blockItem}_n) \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathbf{block}(\circ; \mathit{blockItem}_1; \cdots; \mathit{blockItem}_n); () \Rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \lambda(\mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \lambda(\circ; \mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \Rightarrow (\circ; \mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathit{expr}(\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow \mathit{type} \mid \Delta}{
    \begin{array}{c}
      \Gamma \vdash \mathit{expr} \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta_1
      \\
      \Delta_1 \vdash (\mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Leftarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}(\mathit{expr}_{1,1} \rightarrow \mathit{expr}_{1,2}; \cdots; \mathit{expr}_{n,1} \rightarrow \mathit{expr}_{n,2}) \Rightarrow \mathit{type} \mid \Delta_{n,2}}{
    \begin{array}{c}
      n > 0
      \hspace{1em}
      \Gamma \vdash \mathit{expr}_{1,1} \Leftarrow \mathbf{Bool} \mid \Delta_{1,1}
      \hspace{1em}
      \Delta_{1,1} \vdash \mathit{expr}_{1,2} \Rightarrow \mathit{type} \mid \Delta_{1,2}
      \\
      \Delta_{1,2} \vdash \mathit{expr}_{2,1} \Leftarrow \mathbf{Bool} \mid \Delta_{2,1}
      \hspace{1em}
      \Delta_{2,1} \vdash \mathit{expr}_{2,2} \Leftarrow \mathit{type} \mid \Delta_{2,2}
      \\
      \vdots
      \\
      \Delta_{n - 1,2} \vdash \mathit{expr}_{n,1} \Leftarrow \mathbf{Bool} \mid \Delta_{n,1}
      \hspace{1em}
      \Delta_{n,1} \vdash \mathit{expr}_{n,2} \Leftarrow \mathit{type} \mid \Delta_{n,2}
    \end{array}
  }
  \\
  \infer{\Gamma \vdash \mathbf{case}() \Rightarrow \hat{\alpha} \mid \Gamma; \hat{\alpha}: \mathbf{Type}}{}
\end{gather*}

Tuple:

$\fbox{$\Gamma \vdash (\circ; \mathit{tupleItem}_1; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ; \mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (\circ) \Rightarrow (\circ) \mid \Gamma}{}
  \\
  \infer{\Gamma \vdash (\circ; x = \mathit{expr}; \mathit{tupleItem}_2; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ; x: \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type} \mid \Delta_1
    &
    \Delta_1 \vdash (\circ; \mathit{tupleItem}_2; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\circ; \mathbf{prom}(x) = \mathit{type}; \mathit{tupleItem}_2; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ; x: \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0 \mid \Delta_1
      \\
      \Delta_1; x; x = \mathit{type} \vdash (\circ; \mathit{tupleItem}_2; \cdots; \mathit{tupleItem}_n) \Rightarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta; x; \Delta_2
    \end{array}
  }
\end{gather*}

Block:

$\fbox{$\Gamma \vdash \mathbf{block}(\circ; \mathit{blockItem}_1; \cdots; \mathit{blockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathbf{block}(\circ); \mathit{type} \Rightarrow \mathit{type} \mid \Gamma}{}
  \\
  \infer{\Gamma \vdash \mathbf{block}(\circ; \mathit{expr}_1; \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{expr}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \Delta_1 \vdash \mathbf{block}(\circ; \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); \mathit{type}_1 \Rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\circ; \mathbf{let}(x_1 = \mathit{expr}_1); \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{expr}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \Delta_1; x_1: \mathit{type}_1 \vdash \mathbf{block}(\circ; \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); () \Rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1; \Delta_2
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\circ; \mathbf{rec}(x_1 = \mathit{expr}_1); \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma; \hat{\alpha_1}; x_1: \hat{\alpha_1} \vdash \mathit{expr}_1 \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \Delta_1 \vdash \mathbf{block}(\circ; \mathit{blockItem}_2; \cdots; \mathit{blockItem}_n); () \Rightarrow \mathit{type} \mid \Delta; x_1: \hat{\alpha_1}; \Delta_2
  }
\end{gather*}

Abstraction:

$\fbox{$\Gamma \vdash \lambda(\circ; \mathit{argItem}_1; \cdots; \mathit{argItem}_n)(\mathit{expr}) \Rightarrow (\circ; \mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \lambda(\circ)(\mathit{expr}) \Rightarrow (\circ) \rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{expr} \Rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash \lambda(\circ; x_1: \mathit{type}_1; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; x_1: \mathit{type}_1; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
    \end{array}
  }{
    \begin{array}{l}
      \Gamma; x_1: \mathit{type}_1 \vdash \lambda(\circ; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1; \Delta_1
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash \lambda(\circ; x_1; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; x_1: \hat{\alpha_1}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
    \end{array}
  }{
    \begin{array}{l}
      \Gamma; \hat{\alpha_1}; x_1: \hat{\alpha_1} \vdash \lambda(\circ; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \hat{\alpha_1}; \Delta_1
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash \lambda(\circ; \mathbf{prom}(x_1): \mathit{type}_1; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathbf{prom}(x_1): \mathit{type}_1; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
    \end{array}
  }{
    \begin{array}{l}
      \Gamma; x_1: \mathit{type}_1 \vdash \lambda(\circ; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1; \Delta_1
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash \lambda(\circ; \mathbf{prom}(x_1); \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathbf{prom}(x_1): \hat{\alpha_1}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
    \end{array}
  }{
    \begin{array}{l}
      \Gamma; \hat{\alpha_1}; x_1: \hat{\alpha_1} \vdash \lambda(\circ; \mathit{argItem}_2; \cdots; \mathit{argItem}_n)(\mathit{expr})
      \\
      \hspace{3em}\Rightarrow (\circ; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \hat{\alpha_1}; \Delta_1
    \end{array}
  }
\end{gather*}

Type:

$\fbox{$\Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0 \mid \Delta$}$
$\fbox{$\Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0 \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash x \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma(x) = \mathit{type}
    &
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0 \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\mathit{type}: \mathit{type}_0) \Rightarrow \mathit{type}_0 \mid \Delta}{
    \Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_0 \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathit{type} \Leftarrow \mathit{type}_2 \mid \Delta}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_1 \mid \Delta_1
    &
    \Delta_1 \vdash \mathit{type}_1 \preceq \mathit{type}_2 \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathbf{Type} \Rightarrow \mathbf{Type} \mid \Gamma}{}
  \\
  \infer{\Gamma \vdash n \Rightarrow \mathbf{Int} \mid \Delta}{
    \Gamma \vdash \mathbf{Int} \Leftarrow \mathbf{Type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \Rightarrow \mathbf{Type} \mid \Delta}{
    \Gamma \vdash (\circ; \mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n) \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n)}{
    \Delta_0 = \Gamma
    &
    \Delta_0 \vdash \mathit{typeTupleItem}_1 \Rightarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
    &
    \cdots
    &
    \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n \Rightarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
  }
  \\
  \infer{\Gamma \vdash (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \Rightarrow \mathbf{Type} \mid \Delta}{
    \Gamma \vdash (\circ; \mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n) \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathbf{block}(\circ; \mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n); () \Rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathit{type}(\mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n) \Rightarrow \mathit{type}_0 \mid \Delta_n}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type} \Rightarrow (\mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type}_0 \mid \Delta_0
      \\
      \Delta_0 \vdash \mathit{typeTupleItem}_1 \Leftarrow \mathit{typeTupleSigItem}_1 \mid \Delta_1
      \hspace{1em}
      \cdots
      \hspace{1em}
      \Delta_{n - 1} \vdash \mathit{typeTupleItem}_n \Leftarrow \mathit{typeTupleSigItem}_n \mid \Delta_n
    \end{array}
  }
\end{gather*}

Tuple Type:

$\fbox{$\Gamma \vdash (\circ; \mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (\circ) \mid \Gamma}{}
  \\
  \infer{\Gamma \vdash (\circ; x_1: \mathit{type}_1; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta}{
    \Gamma \vdash \mathit{type}_1 \Leftarrow \mathbf{Type} \mid \Delta_1
    &
    \Delta_1; x_1: \mathit{type}_1 \vdash (\circ; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}_1; \Delta_2
  }
  \\
  \infer{\Gamma \vdash (\circ; \mathbf{prom}(x_1): \mathit{type}_1; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta}{
    \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type} \mid \Delta_1
    &
    \Delta_1; x_1: \mathit{type}_1 \vdash (\circ; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}_1; \Delta_2
  }
\end{gather*}

Type Tuple:

$\fbox{$\Gamma \vdash (\circ; \mathit{typeTupleItem}_1; \cdots; \mathit{typeTupleItem}_n) \Rightarrow (\circ; \mathit{typeTupleSigItem}_1; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (\circ) \Rightarrow (\circ) \mid \Gamma}{}
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash (\circ; x_1 = \mathit{type}_1; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
      \\
      \hspace{3em}\Rightarrow (\circ; x_1: \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Gamma
    \end{array}
  }{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type} \mid \Delta_1
      \\
      \begin{array}{l}
        \Delta_1; x_1: \mathit{type} \vdash (\circ; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
        \\
        \hspace{3em}\Rightarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}; \Delta_2
      \end{array}
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash (\circ; x_1 = \mathit{type}_1; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
      \\
      \hspace{3em}\Leftarrow (\circ; x_1: \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Gamma
    \end{array}
  }{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}_1 \Leftarrow \mathit{type} \mid \Delta_1
      \\
      \begin{array}{l}
        \Delta_1; x_1: \mathit{type} \vdash (\circ; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
        \\
        \hspace{3em}\Leftarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}; \Delta_2
      \end{array}
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash (\circ; \mathbf{prom}(x_1) = \mathit{type}_1; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
      \\
      \hspace{3em}\Rightarrow (\circ; \mathbf{prom}(x_1): \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Gamma
    \end{array}
  }{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type} \mid \Delta_1
      \\
      \begin{array}{l}
        \Delta_1; x_1: \mathit{type}; x_1 = \mathit{type}_1 \vdash (\circ; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
        \\
        \hspace{3em}\Rightarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}; \Delta_2
      \end{array}
    \end{array}
  }
  \\
  \infer{
    \begin{array}{l}
      \Gamma \vdash (\circ; \mathbf{prom}(x_1) = \mathit{type}_1; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
      \\
      \hspace{3em}\Leftarrow (\circ; \mathbf{prom}(x_1): \mathit{type}; \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Gamma
    \end{array}
  }{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}_1 \Leftarrow \mathit{type} \mid \Delta_1
      \\
      \begin{array}{l}
        \Delta_1; x_1: \mathit{type}; x_1 = \mathit{type}_1 \vdash (\circ; \mathit{typeTupleItem}_2; \cdots; \mathit{typeTupleItem}_n)
        \\
        \hspace{3em}\Leftarrow (\circ, \mathit{typeTupleSigItem}_2; \ldots; \mathit{typeTupleSigItem}_n) \mid \Delta; x_1: \mathit{type}; \Delta_2
      \end{array}
    \end{array}
  }
\end{gather*}

Type Block:

$\fbox{$\Gamma \vdash \mathbf{block}(\circ; \mathit{typeBlockItem}_1; \cdots; \mathit{typeBlockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash \mathbf{block}(\circ); \mathit{type} \Rightarrow \mathit{type} \mid \Gamma}{}
  \\
  \infer{\Gamma \vdash \mathbf{block}(\circ; \mathit{type}_1; \mathit{typeBlockItem}_2; \cdots; \mathit{typeBlockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type}_1' \mid \Delta_1
    &
    \Delta_1 \vdash \mathbf{block}(\circ; \mathit{typeBlockItem}_2; \cdots; \mathit{typeBlockItem}_n); \mathit{type}_1' \Rightarrow \mathit{type} \mid \Delta
  }
  \\
  \infer{\Gamma \vdash \mathbf{block}(\circ; \mathbf{let}(x_1 = \mathit{type}_1); \mathit{typeBlockItem}_2; \cdots; \mathit{typeBlockItem}_n); \mathit{type}_0 \Rightarrow \mathit{type} \mid \Delta}{
    \begin{array}{c}
      \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type}_1' \mid \Delta_1
      \\
      \Delta_1; x_1: \mathit{type}_1' \vdash \mathbf{block}(\circ; \mathit{typeBlockItem}_2; \cdots; \mathit{typeBlockItem}_n); () \Rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1'; x_1 = \mathit{type}_1; \Delta_2
    \end{array}
  }
\end{gather*}

Abstraction Type:

$\fbox{$\Gamma \vdash (\circ; \mathit{typeTupleSigItem}_1; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta$}$

\begin{gather*}
  \infer{\Gamma \vdash (\circ) \rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{type} \Rightarrow \mathit{type}_0 \mid \Delta
  }
  \\
  \infer{\Gamma \vdash (\circ; x_1: \mathit{type}_1; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{type}_1 \Leftarrow \mathbf{Type} \mid \Delta_1
    &
    \Delta_1; x_1: \mathit{type}_1 \vdash (\circ; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1; \Delta_2
  }
  \\
  \infer{\Gamma \vdash (\circ; \mathbf{prom}(x_1): \mathit{type}_1; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta}{
    \Gamma \vdash \mathit{type}_1 \Rightarrow \mathit{type}_1' \mid \Delta_1
    &
    \Delta_1; x_1: \mathit{type}_1 \vdash (\circ; \mathit{typeTupleSigItem}_2; \cdots; \mathit{typeTupleSigItem}_n) \rightarrow \mathit{type} \mid \Delta; x_1: \mathit{type}_1; \Delta_2
  }
\end{gather*}
